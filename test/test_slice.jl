
data_path = Pkg.dir("Meshes")*"/test/data/"

s = slice(mesh(data_path*"cube_binary.stl", topology=true), [1.0, 2.0])

let
    @test length(s) == 2
    @test length(s[1]) == length(s[2]) == 1
    @test s[1][1] == [([0.0,1.0],[0.0,0.0]),([0.0,0.0],[1.0,0.0]),([1.0,0.0],[10.0,0.0]),([10.0,0.0],[10.0,1.0]),([10.0,1.0],[10.0,10.0]),([10.0,10.0],[1.0,10.0]),([1.0,10.0],[0.0,10.0]),([0.0,10.0],[0.0,1.0])]
    @test s[2][1] == [([0.0,2.0],[0.0,0.0]),([0.0,0.0],[2.0,0.0]),([2.0,0.0],[10.0,0.0]),([10.0,0.0],[10.0,2.0]),([10.0,2.0],[10.0,10.0]),([10.0,10.0],[2.0,10.0]),([2.0,10.0],[0.0,10.0]),([0.0,10.0],[0.0,2.0])]
end


let
    m = mesh(data_path*"cube_binary.stl")
    int_m = convert(Mesh{Vector3{Int}, Face{Int}}, m, 1000)
    s = slice(int_m, [100, 200, 5000])
    @test s[1] == [([0,100],[0,0]),([0,10000],[0,100]),([100,0],[10000,0]),([0,0],[100,0]),([100,10000],[0,10000]),([10000,10000],[100,10000]),([10000,100],[10000,10000]),([10000,0],[10000,100])]
    @test s[2] == [([0,200],[0,0]),([0,10000],[0,200]),([200,0],[10000,0]),([0,0],[200,0]),([200,10000],[0,10000]),([10000,10000],[200,10000]),([10000,200],[10000,10000]),([10000,0],[10000,200])]
    @test s[3] == [([0,5000],[0,0]),([0,10000],[0,5000]),([5000,0],[10000,0]),([0,0],[5000,0]),([5000,10000],[0,10000]),([10000,10000],[5000,10000]),([10000,5000],[10000,10000]),([10000,0],[10000,5000])]
end
